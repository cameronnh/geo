/*
Deployment script for GeoDB

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "GeoDB"
:setvar DefaultFilePrefix "GeoDB"
:setvar DefaultDataPath "C:\Users\camer\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\MSSQLLocalDB"
:setvar DefaultLogPath "C:\Users\camer\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\MSSQLLocalDB"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'Rename refactoring operation with key 9f4ed8b3-5bdc-4332-a238-2657553a4878 is skipped, element [dbo].[Games].[Id] (SqlSimpleColumn) will not be renamed to gameId';


GO
PRINT N'Rename refactoring operation with key f9ef6c34-1777-499b-9f9c-13bf7e353037 is skipped, element [dbo].[Games].[guessedScore] (SqlSimpleColumn) will not be renamed to guessedScore1';


GO
PRINT N'The following operation was generated from a refactoring log file 96c30209-9b0f-4035-93cc-5e3247c0280f, a22255e0-d22d-4758-adc7-ab13f61fa32b, f5d14ac6-9aa1-4c89-910d-e05610eaf04a';

PRINT N'Rename [dbo].[user].[closestGame] to bgGlobal';


GO
EXECUTE sp_rename @objname = N'[dbo].[user].[closestGame]', @newname = N'bgGlobal', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file b49abcd2-4e6f-4ae2-bf41-e122d716142f, 405fadd2-fce2-432d-9fe5-764b0754da9e';

PRINT N'Rename [dbo].[user].[gameTableFID] to bgWorld';


GO
EXECUTE sp_rename @objname = N'[dbo].[user].[gameTableFID]', @newname = N'bgWorld', @objtype = N'COLUMN';


GO
PRINT N'Rename refactoring operation with key f5b90204-5706-41aa-8b34-e9d9fb191db0 is skipped, element [dbo].[user].[cgFamous] (SqlSimpleColumn) will not be renamed to bgFamous';


GO
PRINT N'Altering [dbo].[user]...';


GO
ALTER TABLE [dbo].[user]
    ADD [bgFamous]   INT NULL,
        [numCorrect] INT NULL;


GO
-- Refactoring step to update target server with deployed transaction logs
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '9f4ed8b3-5bdc-4332-a238-2657553a4878')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('9f4ed8b3-5bdc-4332-a238-2657553a4878')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'f9ef6c34-1777-499b-9f9c-13bf7e353037')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('f9ef6c34-1777-499b-9f9c-13bf7e353037')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '96c30209-9b0f-4035-93cc-5e3247c0280f')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('96c30209-9b0f-4035-93cc-5e3247c0280f')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'a22255e0-d22d-4758-adc7-ab13f61fa32b')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('a22255e0-d22d-4758-adc7-ab13f61fa32b')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'b49abcd2-4e6f-4ae2-bf41-e122d716142f')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('b49abcd2-4e6f-4ae2-bf41-e122d716142f')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'f5d14ac6-9aa1-4c89-910d-e05610eaf04a')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('f5d14ac6-9aa1-4c89-910d-e05610eaf04a')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '405fadd2-fce2-432d-9fe5-764b0754da9e')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('405fadd2-fce2-432d-9fe5-764b0754da9e')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'f5b90204-5706-41aa-8b34-e9d9fb191db0')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('f5b90204-5706-41aa-8b34-e9d9fb191db0')

GO

GO
PRINT N'Update complete.';


GO
